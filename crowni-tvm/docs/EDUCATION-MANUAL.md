# 한선어 교육 매뉴얼

**Crowny WebScript 학습 가이드 v1.0**

> "모든 판단은 3가지다: 참, 모름, 거짓."

---

## 교육 과정 개요

| 단계 | 제목 | 시간 | 대상 |
|------|------|------|------|
| 1 | Trit 사고 훈련 | 2시간 | 비개발자 포함 전체 |
| 2 | 한선어 기본 | 4시간 | 초급 개발자 |
| 3 | Crowny App 만들기 | 8시간 | 중급 개발자 |
| 4 | AI + Trit 합의 시스템 | 8시간 | 고급 개발자 |

---

## 1단계: Trit 사고 훈련 (2시간)

### 1.1 2진 vs 3진

**2진 세계** (기존 컴퓨팅):
- 승인 / 거부
- 참 / 거짓
- 1 / 0

**3진 세계** (Crowny):
- 승인 / 보류 / 거부
- 참 / 모름 / 거짓
- +1 / 0 / -1

### 1.2 일상 속 3진 판단

| 상황 | 2진 판단 | 3진 판단 |
|------|----------|----------|
| 대출 심사 | 승인/거부 | 승인/추가서류/거부 |
| 의료 진단 | 양성/음성 | 양성/재검필요/음성 |
| AI 답변 | 맞다/틀리다 | 맞다/불확실/틀리다 |
| 면접 결과 | 합격/불합격 | 합격/대기/불합격 |
| 투자 판단 | 매수/매도 | 매수/관망/매도 |

### 1.3 실습: 3진으로 생각하기

**문제**: "이 학생의 수학 실력은?"

2진: "잘한다" 또는 "못한다"
3진: "잘한다(P)" 또는 "더 봐야 한다(O)" 또는 "못한다(T)"

**문제**: "이 코드에 버그가 있는가?"

2진: "있다" 또는 "없다"
3진: "있다(T)" 또는 "불확실하다(O)" 또는 "없다(P)"

### 1.4 Trit 연산

```
AND (그리고):
  P ∧ P = P    (참 그리고 참 = 참)
  P ∧ O = O    (참 그리고 모름 = 모름)
  P ∧ T = T    (참 그리고 거짓 = 거짓)
  O ∧ O = O    (모름 그리고 모름 = 모름)

NOT (아니다):
  ¬P = T       (참의 반대 = 거짓)
  ¬O = O       (모름의 반대 = 모름)
  ¬T = P       (거짓의 반대 = 참)
```

---

## 2단계: 한선어 기본 (4시간)

### 2.1 첫 번째 프로그램

```crowny
; 나의 첫 한선어 프로그램
값 42
보여줘
끝
```

실행:
```bash
crowni-tvm hanseon 첫프로그램.cws
```

출력:
```
42
✓ 실행 완료
```

### 2.2 산술 연산

```crowny
; 더하기
값 10
값 20
더
보여줘

; 곱하기
값 7
값 6
곱
보여줘

끝
```

출력:
```
30
42
```

**핵심**: 한선어는 **후위 표기법**(스택 기반)입니다.
- `10 20 더` = 10 + 20
- `7 6 곱` = 7 × 6

### 2.3 변수

```crowny
변수 이름 = "한선"
변수 나이 = 30
변수 점수 = 95.5

이름
보여줘

나이
점수
더
보여줘

끝
```

### 2.4 3진 값

```crowny
; 3진 리터럴
참       ; P (+1)
보여줘

모름     ; O (0)
보여줘

거짓     ; T (-1)
보여줘

; 논리 연산
참
참
그리고    ; P AND P = P
보여줘

참
아니다    ; NOT P = T
보여줘

끝
```

### 2.5 조건 분기 (3갈래)

```crowny
; 2진 세계: if/else (2갈래)
; 3진 세계: 만약/보류/아니면 (3갈래)

참
만약 {
    값 100
    보여줘        ; P일 때 실행
} 보류 {
    값 50
    보여줘        ; O일 때 실행
} 아니면 {
    값 0
    보여줘        ; T일 때 실행
}

끝
```

### 2.6 반복

```crowny
반복 5 {
    값 1
    보여줘
}

끝
```

### 2.7 함수

```crowny
함수 인사 {
    값 "안녕하세요!"
    보여줘
}

함수 계산 {
    값 100
    값 200
    더
    보여줘
}

; 함수는 정의만 — 호출은 이름()
끝
```

### 2.8 영어도 됩니다

```crowny
; 한국어와 영어 혼용 가능
val 10
val 20
add
print

var score = 100
score
print

end
```

---

## 3단계: Crowny App 만들기 (8시간)

### 3.1 CAR 실행 모델 이해

모든 앱은 CAR(Crowny Application Runtime)을 통해 실행됩니다.

```
앱 코드 → CAR.submit() → 권한 검사 → 실행 → TritResult 반환
```

**규칙**: 직접 Meta-Kernel 호출 금지. 반드시 CAR 경유.

### 3.2 TritResult 이해

모든 실행 결과는 TritResult입니다:

```
TritResult {
    state: P/O/T       ← 성공/보류/실패
    data: "결과 데이터"  ← 반환값
    elapsed_ms: 15      ← 실행 시간
    task_id: 42         ← 작업 번호
}
```

### 3.3 웹 서비스 만들기

Crowny 웹서버는 CTP(Crowny Trit Protocol) 기반입니다.

**요청 흐름**:
```
HTTP 요청
  ↓
CTP 헤더 확인 (X-Crowny-Trit: PPPOOOOOO)
  ↓
권한 확인 (Permission Engine)
  ↓
라우트 매칭
  ↓
CAR.submit() → TVM 실행
  ↓
TritResult → HTTP 응답
```

**CTP 헤더 해석**:
```
P P P O O O O O O
│ │ │
│ │ └─ 합의 상태
│ └─── 권한 상태
└───── 전체 상태
```

### 3.4 패키지 만들기

```bash
# 새 프로젝트 생성
cpm init my-app

# 구조
my-app/
├── crowny.toml
├── src/
│   └── main.cws
└── tests/
    └── test.cws
```

**crowny.toml**:
```toml
[package]
name = "my-app"
version = "0.1.0"
trit-version = "1.0"

[permissions]
llm = "user"
```

### 3.5 테스트 작성

```crowny
; tests/test.cws

; 테스트 1: 산술
값 2
값 3
더
; → 5 기대

; 테스트 2: 3진 논리
참
참
그리고
; → P 기대

끝
```

실행:
```bash
cpm test
```

---

## 4단계: AI + Trit 합의 시스템 (8시간)

### 4.1 LLM 호출

```crowny
; 단일 LLM 호출
질문해 "이 환자의 증상이 심각한가?"
보여줘

끝
```

### 4.2 다중 모델 합의

Crowny의 핵심 혁신: **3개 이상의 AI가 3진 투표**

```
Claude → P (심각하다)
GPT-4  → O (더 검사 필요)
Gemini → P (심각하다)

합의 결과: P (2/3 동의 → 심각)
```

이것이 단순 AI 답변과 다른 점:
- 단일 AI: "모르겠다" 또는 환각 가능
- 3진 합의: 불확실하면 O(보류)로 정직하게 표현

### 4.3 산업 적용 패턴

**의료 AI 판단**:
```
증상 입력 → 3개 AI 분석 → Trit 합의
  P → 즉시 진료
  O → 추가 검사
  T → 정상
```

**투자 AI 판단**:
```
시장 데이터 → 3개 AI 분석 → Trit 합의
  P → 매수 신호
  O → 관망
  T → 매도 신호
```

**교육 AI 판단**:
```
학생 답변 → 3개 AI 채점 → Trit 합의
  P → 정답
  O → 부분 정답 (피드백 제공)
  T → 오답 (설명 제공)
```

### 4.4 권한 모델

```toml
# crowny.toml 권한 설정

[permissions]
llm = "user"          # LLM 호출: 인증 사용자
network = "admin"     # 네트워크: 관리자만
file = "user"         # 파일 접근: 인증 사용자
system = "kernel"     # 시스템: 커널 전용
```

권한 수준:
- `public`: 누구나
- `user`: 인증된 사용자
- `admin`: 관리자
- `kernel`: 커널 전용 (앱 접근 불가)

### 4.5 이벤트 로깅

모든 Task는 자동 기록됩니다:

```
[P] TaskComplete task#1 "LLM호출" 250ms
[O] ConsVote "Claude=P, GPT4=O, Gemini=P"
[P] ConsResult "합의: P (2/3)"
```

이 로그로:
- 판단 과정 추적
- 오류 분석
- 감사(Audit) 수행

---

## 실습 프로젝트

### 프로젝트 1: 3진 계산기

```crowny
; 3진 계산기
; 입력 2개를 받아 4칙연산 후 3진 판정

변수 a = 100
변수 b = 50

a
b
더
보여줘

a
b
빼
보여줘

a
b
곱
보여줘

끝
```

### 프로젝트 2: AI 면접관

```crowny
; AI 면접관 — 3진 합의 판정

질문해 "지원자가 'Rust 경험 3년'이라고 했다. 이 답변은 신뢰할 수 있는가?"
보여줘

; 결과:
; P → 채용 추천
; O → 추가 면접
; T → 불합격

끝
```

### 프로젝트 3: 3진 투표 시스템

```crowny
; 의사결정: 프로젝트 진행 여부
; 3명의 판단을 3진 합의

참       ; 투표 1: 찬성
모름     ; 투표 2: 보류
참       ; 투표 3: 찬성

; 합의: P 2개, O 1개 → 전체 P(진행)

끝
```

---

## 도구 체인

| 도구 | 명령 | 용도 |
|------|------|------|
| 실행 | `crowni-tvm hanseon 파일.cws` | 한선어 실행 |
| 컴파일 | `crowni-tvm compile 파일.cws` | WASM 생성 |
| 바이트코드 | `crowni-tvm bytecode 파일.cws` | .크라운 생성 |
| 디버그 | `crowni-tvm debug 파일.cws` | 단계 실행 |
| 테스트 | `crowni-tvm test` | 테스트 러너 |
| 패키지 | `cpm init / install / publish` | 패키지 관리 |
| IDE | VSCode + Crowny Extension | 편집기 |

---

## 다음 단계

학습 완료 후:

1. **Crowny Canon v1.0** 읽기 — 전체 스펙 이해
2. **CPM으로 패키지 만들기** — 생태계 참여
3. **실제 서비스 구축** — AI 판단 엔진, 워크플로우
4. **커뮤니티 기여** — 새 섹터 명령어 제안, 문서 번역

---

**© 2026 CROWNIN Project — 균형3진 교육 체계 v1.0**
